{. warning[UnusedImport]:off .}
{. hint[XDeclaredButNotUsed]:off .}

import nanim, nanovg, random


proc ventityScene(): Scene =
  let
    scene = newScene()
    testPath = "M 230 80 A 45 45, 0, 1, 0, 275 125 L 275 80 Z"
    testPathHeart = "M 10,30 A 20,20 0,0,1 50,30 A 20,20 0,0,1 90,30 Q 90,60 50,90 Q 10,60 10,30 Z"
    testPath2 = "M2,2 L8,2 L2,5 L8,5 L2,8 L8,8"
    testPath3 = "M2,8 L5,2 L8,8"
    testPath4 = "M 10 80 C 40 10, 65 10, 95 80 S 150 150, 180 80"
    testPath5 = "M 10 80 Q 52.5 10, 95 80 T 180 80"
    testPath6 = "M 10 10 H 90 V 90 H 10 Z "
    testPath7 = "M2,5 C2,8 8,8 8,5"
    nikePath = "m 181.86457,511.11411 c -12.52385,-0.49755 -22.77022,-3.92442 -30.78203,-10.28929 -1.52903,-1.21591 -5.17253,-4.86157 -6.39486,-6.39916 -3.24891,-4.08526 -5.45776,-8.06114 -6.93105,-12.47237 -4.53342,-13.57891 -2.20024,-31.39748 6.6737,-50.9531 7.59794,-16.74202 19.32186,-33.34686 39.77599,-56.34437 3.01299,-3.38402 11.98555,-13.28082 12.04347,-13.28082 0.0216,0 -0.46749,0.84706 -1.08296,1.87861 -5.31833,8.90818 -9.86893,19.40114 -12.34799,28.48523 -3.9823,14.57611 -3.50195,27.08494 1.40678,36.78443 3.38615,6.68225 9.19133,12.47025 15.71914,15.66981 11.42798,5.59929 28.15931,6.0625 48.59201,1.35536 1.40679,-0.32599 71.11561,-18.83079 154.90943,-41.12278 83.79385,-22.29414 152.36394,-40.52017 152.37467,-40.50516 0.0237,0.0193 -194.67687,83.33278 -295.74887,126.555 -16.00652,6.84309 -20.28691,8.57151 -27.8119,11.21354 -19.23607,6.75513 -36.46708,9.97833 -50.39553,9.42507 z"
    arrowPath = "M174.71213048820948,234.4441204420079 L174.71213048820948,140.10819326007507 L174.71213048820948,140.10819326007507 C174.71213048820948,99.58574318739096 207.56207009962907,66.73579794817252 248.08453142790495,66.73579794817252 L248.08453142790495,66.73579794817252 L248.08453142790495,66.73579794817252 C267.5440965056338,66.73579794817252 286.20665299880733,74.46608337150909 299.96666122713134,88.22607471644429 C313.72665819985644,101.98606606137665 321.456926739808,120.6486225545496 321.456926739808,140.10819326007507 L321.456926739808,150.5899648228847 L342.4204529820412,150.5899648228847 L300.49339486977595,192.51706232973265 L258.5662973629253,150.5899648228847 L279.5298404885561,150.5899648228847 L279.5298404885561,140.10819326007507 C279.5298404885561,122.74143135512239 265.4512877050618,108.66288982722284 248.08453705570543,108.66288982722284 L248.08453705570543,108.66288982722284 L248.08453705570543,108.66288982722284 C230.7177638951622,108.66288982722284 216.63922236726677,122.74143135512239 216.63922236726677,140.10819326007507 L216.63922236726677,234.4441204420079 L174.71213048820948,234.4441204420079 z"
    testPath8 = """M 10 315
           L 110 215
           A 30 50 0 0 1 162.55 162.45
           L 172.55 152.45
           A 30 50 -45 0 1 215.1 109.9
           L 315 10"""
    testPath9 = """M 80 230
           A 45 45, 0, 0, 1, 125 275
           L 125 230 Z"""
    testPath10 = """M 230 230
           A 45 45, 0, 1, 1, 275 275
           L 275 230 Z"""
    testPath11 = """M 4 8 L 10 1 L 13 0 L 12 3 L 5 9 C 6 10 6 11 7 10 C 7 11 8 12 7 12 A 1.42 1.42 0 0 1 6 13 A 5 5 0 0 0 4 10 Q 3.5 9.9 3.5 10.5 T 2 11.8 T 1.2 11 T 2.5 9.5 T 3 9 A 5 5 90 0 0 0 7 A 1.42 1.42 0 0 1 1 6 C 1 5 2 6 3 6 C 2 7 3 7 4 8 M 10 1 L 10 3 L 12 3 L 10.2 2.8 L 10 1"""
    testPath12 = """M 50 400 Q 100 250 150 300 Q 250 550 300 300 Q 350 100 400 300 C 450 550 450 50 500 400 C 550 50 550 550 600 300 A 50 50 0 1 1 700 300 Q 750 450 650 500 L 500 500 L 350 450 L 400 600 """
    testPath13="M2,2 L8,2 L2,5 L8,5 L2,8 L8,8 L12,2 l8,2 l2,5 l8,5 l2,8 l8,8"
    strokeColor = rgb(256, 30, 120)
    strokeColor2 = rgb(100, 100, 200)

  for y in 0..10:
    for x in 0..10:
      var a = newVEntityFromPathString(arrowPath)

      a.moveTo(x * 100.0, y * 100.0)
      a.stroke(strokeColor, 0.0)
      a.fill(strokeColor)
      a.pscale(0.4)

      scene.onTrack y + x * 110:
        a.rotate(rand(-180.0..180.0))

        scene.sleep((x + y * 3) * 30.0)
        scene.play(a.rotate(180))
        scene.sleep(400)
        scene.play(a.rotate(180))

      scene.add(a)

  return scene


when isMainModule:
  render(ventityScene)